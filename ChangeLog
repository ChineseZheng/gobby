2009-01-04  Armin Burgmeier  <armin@arbur.net>

	* === Released 0.4.91 ===

	* NEWS: Update for release.

2009-01-04  Armin Burgmeier  <armin@arbur.net>

	* code/core/window.cpp: Re-enable shortcuts for Undo and Redo. These
	have been accidentally disabled when pasting text in the "Direct
	Connection" entry has been fixed.

2009-01-04  Armin Burgmeier  <armin@arbur.net>

	* code/core/docwindow.hpp:
	* code/core/docwindow.cpp: Show a tooltip when hovering over text,
	saying what user wrote the hovered text.

2009-01-04  Armin Burgmeier  <armin@arbur.net>

	* code/core/window.hpp:
	* code/core/window.cpp: Fixed pasting text into the direct connection
	entry when having open a document. Before, the text was pasted into
	the document even though the entry was focused. We use the same
	workaround as gedit.

2009-01-04  Armin Burgmeier  <armin@arbur.net>

	* code/core/folder.cpp: Re-enable Ctrl+Alt+PgDown/Ctrl+Alt+PgUp to
	cycle between tabs.

	* code/core/docwindow.cpp: Added a TODO comment about using a single
	UserList widget for all documents.

2009-01-04  Armin Burgmeier  <armin@arbur.net>

	* code/core/statusbar.hpp:
	* code/core/statusbar.cpp: Added an invalid_handle() function, so
	other code can keep around invalid message handles, and fixed invalid
	memory access when a document was removed.

	* code/commands/browser-context-commands.cpp: Added a TODO comment
	about using file-tasks for common operations.

	* code/commands/file-commands.cpp: Query file info asynchronously, to
	avoid UI hangs when opening unresponsive remote files.

2009-01-03  Armin Burgmeier  <armin@arbur.net>

	* code/util/historyentry.hpp:
	* code/util/historyentry.cpp: Added HistoryComboBoxEntry, which allows
	to select the history entries via a combo box.

	* code/dialogs/openlocationdialog.hpp:
	* code/dialogs/openlocationdialog.cpp: Use a HistoryComboBoxEntry
	instead of a simple GtkEntry.

	* code/dialogs/entrydialog.cpp: Don't use
	Gtk::Entry::get_text_length() since this is available only since gtkmm
	2.14, but we require only 2.12.

2009-01-03  Armin Burgmeier  <armin@arbur.net>

	* code/dialogs/openlocationdialog.hpp:
	* code/dialogs/openlocationdialog.cpp:
	* code/dialogs/Makefile.am: Added a dialog which queries the user for
	an URI to open.

	* code/core/header.hpp:
	* code/core/header.cpp: Added an "Open Location" menu item.

	* code/commands/file-commands.hpp:
	* code/commands/file-commands.cpp: Handle the "Open Location" menu
	item, fixed deinitialization order.

	* code/window.cpp: Pass statusbar to file commands.

	* code/operations/operation-open.cpp: Added error handling for the
	initial read_async operation.

2009-01-02  Armin Burgmeier  <armin@arbur.net>

	* code/util/historyentry.hpp:
	* code/util/historyentry.cpp:
	* code/util/Makefile.am: Added a HistoryEntry class which allows
	scrolling through past entries in a GtkEntry, optionally saving and
	restoring the history from/to disk.

	* code/core/browser.hpp:
	* code/core/browser.cpp: Use a history entry for the hostname entry.

2008-12-31  Armin Burgmeier  <armin@arbur.net>

	* code/core/preferences.hpp:
	* code/core/preferences.cpp: Added autosave_enabled and
	autosave_interval properties.

	* code/dialogs/preferencesdialog.hpp:
	* code/dialogs/preferencesdialog.cpp: Added the two preferences to the
	user interface.

	* code/commands/autosave-commands.hpp:
	* code/commands/autosave-commands.cpp:
	* code/commands/Makefile.am: Implemented autosave.

	* code/window.hpp:
	* code/window.cpp: Instantiate AutosaveCommands.

	* code/commands/file-commands.cpp: Added a TODO comment about
	defaulting to CRLF on Windows.

2008-12-31  Armin Burgmeier  <armin@arbur.net>

	* code/operations/operations.hpp:
	* code/operations/operations.cpp: Added a begin_save_operation signal,
	and added a boolean parameter to base operation's finished signal
	which indicates whether the operation was performed successfully or
	not. Removed the remove() function, and added finish() and fail()
	instead.

	* code/operations/operation-open.hpp: Derive from sigc::trackable.

	* code/operations/operation-save.hpp:
	* code/operations/operation-save.cpp: Added get_document(),
	get_start_time() and derive from sigc::trackable, adapt to finish()
	and fail().

	* code/operations/operation-new.cpp:
	* code/operations/operation-open.cpp:
	* code/operations/operation-delete.cpp: Adapt to finish() and fail().

2008-12-30  Armin Burgmeier  <armin@arbur.net>

	* code/operations/operations.hpp:
	* code/operations/operations.cpp: Added signal_finished to the
	operation base class, and the various functions creating operations
	now return them.

	* code/operations/operation-save.cpp: Fixed a typo in a comment.

2008-12-29  Armin Burgmeier  <armin@arbur.net>

	* code/window.hpp:
	* code/window.cpp: Changed (de)initialization order so that browser is
	freed after folder. This is required to avoid a warning when an
	InfSession holds a reference to a connection (such as during
	synchronization) and Gobby is closed.

2008-12-28  Armin Burgmeier  <armin@arbur.net>

	* configure.ac: Require libinfinity >= 0.2.

2008-12-28  Armin Burgmeier  <armin@arbur.net>

	* code/core/browser.cpp:
	* code/core/noteplugin.cpp:
	* code/operations/operation-open.cpp: Adapt to libinfinity's new
	communication API.

2008-12-23  Philipp Kern  <phil@0x539.de>

	* configure.ac: separate infinote pkg-config from those determining
	if all libraries needed for Gobby's user interface are present, allowing
	easier and separate overrides of them
	* Makefile.am:
	* code/Makefile.am:
	* code/commands/Makefile.am:
	* code/core/Makefile.am:
	* code/dialogs/Makefile.am:
	* code/operations/Makefile.am:
	* code/util/Makefile.am: use AM_CPPFLAGS for everything instead
	of specialized per-target CPPFLAGS entries

2008-12-23  Philipp Kern  <phil@0x539.de>

	* code/Makefile.am:
	* code/commands/Makefile.am:
	* code/core/Makefile.am:
	* code/dialogs/Makefile.am:
	* code/operations/Makefile.am:
	* code/util/Makefile.am: Include top-level CFLAGS.

2008-12-19  Armin Burgmeier  <armin@0x539.de>

	* po/fr.po: Changed application name to "Editeur collaboratif Gobby"
	to meet French Gnome standard.

2008-12-19  Armin Burgmeier  <armin@0x539.de>

	* po/fr.po: Added translation for the desktop file (Bug #415, Pascal
	Kreyer).

2008-12-19  Armin Burgmeier  <armin@0x539.de>

	* po/de.po: Removed dash from application name, as other GNOME
	programs do.

2008-12-17  Armin Burgmeier  <armin@0x539.de>

	* icons/hicolor/48x48/gobby-0.5.png:
	* icons/hicolor/48x48/Makefile.am:
	* icons/hicolor/Makefile.am: Added fixed-size version of gobby icon.

	* icons/HighContrastLargePrintInverse/48x48/gobby-0.5.png:
	* icons/HighContrastLargePrintInverse/48x48/Makefile.am:
	* icons/hicolor/Makefile.am: Added fixed-size version of HCLPI gobby
	icon.

	* configure.ac: Generate the new Makefiles.

2008-12-17  Armin Burgmeier  <armin@0x539.de>

	* contrib/artwork/gobby.svg: Centered the gobby icon into the
	document.

	* code/core/iconmanager.hpp:
	* code/core/iconmanager.cpp: Removed the gobby icon pixbuf.

	* code/dialogs/initialdialog.cpp:
	* code/commands/help-commands.cpp:
	* code/main.cpp: Lookup the gobby icon by its icon name.

	* pixmaps/gobby-0.5.png: Deleted.

	* icons/hicolor/scalable/gobby-0.5.svg: Added scalable gobby icon.
	* icons/hicolor/scalable/Makefile.am: Install it into a proper
	location.
	* icons/hicolor/Makefile.am: Run update-icon-cache on hicolor theme
	after (un)intall.
	* icons/HighContrastLargePrintInverse/scalable/gobby-0.5.svg: Added
	scalable gobby icon for HCLPI theme (Thomas Glatt, Bug #413).
	* icons/HighContrastLargePrintInverse/scalable/Makefile.am: Install
	it.
	* icons/HighContrastLargePrintInverse/Makefile.am: Run
	update-icon-cache on HighContrastLargePrintInverse after (un)install.

	* Makefile.am: Decend into the icons/ subdir.

	* pixmaps/Makefile.am: Don't install gobby-0.5.png to share/pixmaps
	anymore.

	* configure.ac: Generate the new Makefiles.

2008-11-23  Armin Burgmeier  <armin@arbur.net>

	* configure.ac: Post-release bump to 0.4.91.

2008-11-23  Armin Burgmeier  <armin@arbur.net>

	* contrib/Makefile.am: Always add gobby-0.5.desktop.in to the
	distribution.

2008-11-23  Armin Burgmeier  <armin@arbur.net>

	* Makefile.am: Add a dummy C++ file to nondistributed sources, to
	cause C++ linking. Bug #399, Markus Wanjura.

2008-11-23  Armin Burgmeier  <armin@arbur.net>

	* code/core/browser.cpp: Added <sys/socket.h> include, required on
	Mac OS X. Bug #399, Markus Wanjura.

2008-11-23  Armin Burgmeier  <armin@arbur.net>

	* code/util/i18n.hpp: Added definition for N_.

	* code/operations/operation-open.cpp: Made 8bit encoding used for auto
	detection translatable, so that locales with other default 8bit
	encodings than iso-8859-1 get better results for auto detection.

2008-11-23  Armin Burgmeier  <armin@arbur.net>

	* contrib/gobby-0.5.desktop: Removed.

	* contrib/gobby-0.5.desktop.in: Added, marking name and comment for
	translation.

	* contrib/Makefile.am: Generate contrib/gobby-0.5.desktop from
	contrib/gobby-0.5.desktop.in via intltool. This allows the desktop
	file to be translated via po files. Bug #396, based on a patch from
	Takao Fujiwara.

	* autogen.sh: Run intltoolize.

	* configure.ac: Require intltool.

	* update-potfiles: Added contrib/gobby-0.5.desktop.in to list of files
	scanned for translatable strings.

2008-11-09  Armin Burgmeier  <armin@arbur.net>

	* code/commands/edit-commands.cpp: Scroll to cursor after cut or
	paste.

2008-11-05  Armin Burgmeier  <armin@arbur.net>

	* code/commands/edit-commands.cpp: Added a (hopefully) temporary hack
	to set the cursor position to the place where a Undo/Redo has
	occurred. This stopped to work with the latest changes in libinfinity
	(which in turn fix other caret stuff, such as no longer moving the 
	caret around on block indent/unindent, or allowing to paste text
	over a selected area). This can be properly implemented as soon as
	libinfinity supports caret-aware requests.

2008-10-18  Armin Burgmeier  <armin@arbur.net>

	* code/core/browser.cpp:
	* code/core/header.cpp: Use standard capitalization for control
	labels. Bug #223 (Matthew Paul Thomas).

2008-10-18  Armin Burgmeier  <armin@arbur.net>

	* code/main.cpp: Set localedir relative to Gobby executable on
	Windows, so i18n is properly relocatable.

2008-10-18  Armin Burgmeier  <armin@arbur.net>

	* === Released 0.4.90 ===

2008-10-17  Armin Burgmeier  <armin@arbur.net>

	* contrib/gobby-0.5.desktop: Fixed icon file name.

2008-10-16  Armin Burgmeier  <armin@arbur.net>

	* code/Makefile.am:
	* code/commands/Makefile.am:
	* code/core/Makefile.am:
	* code/dialogs/Makefile.am:
	* code/operations/Makefile.am:
	* code/util/Makefile.am: Fix `make distcheck' by using -I$(top_srcdir)
	instead of a relative path such as -I.. Also, changed pixmapdir to
	$(datadir)/pixmaps/gobby-0.5.

	* pixmaps/Makefile.am:
	* pixmaps/gobby-0.5.png: Moved from pixmaps/gobby.png.

	* contrib/Makefile.am:
	* contrib/gobby-0.5.desktop: Moved from gobby.desktop.

	* configure.ac: Changed GETTEXT_PACKAGE from gobby to gobby05.

	* code/core/iconmanager.cpp: Load gobby-0.5.png for the Gobby logo
	instead of gobby.png.

2008-10-16  Armin Burgmeier  <armin@arbur.net>

	* NEWS: Update for release.

2008-10-16  Armin Burgmeier  <armin@arbur.net>

	* all source files: Changed description in GPL header since Gobby is
	no longer libobby driven. Also changed Copyright holder to me and
	Copyright date to 2008 since 99% of the code was written by me in
	2008.

2008-10-16  Armin Burgmeier  <armin@arbur.net>

	* contrib/gobby.desktop: Launch the correct executable, added a
	"(0.5)" to the description to differentiate it from a previous
	parallel-installed version.

2008-10-16  Armin Burgmeier  <armin@arbur.net>

	* code/commands/browser-commands.cpp (on_synchronization_failed):
	Remove the entry from the session map directly instead of waiting for
	session closure, otherwise the error message is overwritten with a
	useless (and incorrent) 'The connection to the publisher has been
	lost' one.

2008-10-15  Armin Burgmeier  <armin@arbur.net>

	* code/core/browser.hpp:
	* code/core/browser.cpp: Adapt to libinfinity API change,
	INFINOTE_HAVE_AVAHI has been renamed to LIBINFINITY_HAVE_AVAHI.

2008-10-15  Armin Burgmeier  <armin@arbur.net>

	* code/core/Makefile.am: Added appicondir and pixmapdir back, so that
	installed pixmaps can be found.

	* code/util/resolv.cpp: Set all fields in getaddrinfo hint, otherwise
	the Win32 implementation of getaddrinfo produces an error.

	* code/core/browser.cpp: Commented-out the device name to device index
	translation for %dev syntax on Windows. It won't be available for now.

	* code/core/iconmanager.cpp: Don't load save-all.svg since GTK+ on
	Win32 has no SVG loader by defualt. Also, locate pixbufs using the
	non-deprecated g_win32_get_package_installation_directory_of_module
	function.

	* code/core/statusbar.cpp: Added code that undefs ERROR, because this
	is used in an enum, and seems to be defined somewhere in a Windows
	header.

	* code/dialogs/preferencesdialog.cpp: Don't set current folder of
	host directory file chooser (which is not shown currently anyway),
	because this could produce an error message if the directory does not
	exist.

	* code/operations/operation-open.cpp:
	* code/operations/operation-save.cpp: Use the C g_iconv API instead of
	Glib::IConv::iconv, because iconv is a define to libiconv on Windows,
	but Glib::IConv::libiconv does not exist.

	* Makefile.am: Fixed linking order, link to stdc++ and ws2_32 on
	Windows.

	* win32/gobby.rc: Fixed path to gobby.res file.

2008-10-15  Armin Burgmeier  <armin@arbur.net>

	* po/LINGUAS: Added LINGUAS file that lists all languages. This seems
	to be required for `make dist'.

	* configure.ac: Use the po/LINGUAS file to set the ALL_LINGUAS
	variable.

2008-10-14  Armin Burgmeier  <armin@arbur.net>

	* code/main.cpp: Call inf_init() instead of initializing gnutls and
	the GObject type system directly.

2008-10-14  Armin Burgmeier  <armin@arbur.net>

	* code/commands/browser-commands.cpp: Fixed a typo in a string.

2008-10-14  Armin Burgmeier  <armin@arbur.net>

	* code/commands/folder-commands.cpp: Only wake inactive users when the
	corresponding document is the currently active one. This fixes a crash
	when text has was selected in an inactive document and the selection
	is erased by selecting something elsewhere.

2008-10-13  Armin Burgmeier  <armin@arbur.net>

	* code/core/titlebar.hpp:
	* code/core/titlebar.cpp:
	* code/core/Makefile.am: Added a new class that handles what is
	displayed in the titel bar of the Gobby window.

	* code/window.hpp:
	* code/window.cpp: Instantiate a TitleBar.

	* code/core/documentinfostorage.hpp: Added a superflous TODO comment.

2008-10-13  Armin Burgmeier  <armin@arbur.net>

	* code/commands/browser-commands.hpp:
	* code/commands/browser-commands.cpp:
	* code/operations/operation-open.cpp:
	* code/operations/operation-save.cpp: Set the modified flag upon
	opening or saving a document correctly.

	* code/core/tablabel.hpp:
	* code/core/tablabel.cpp: Show the modify flag in the tab.

2008-10-12  Armin Burgmeier  <armin@arbur.net>

	* code/operations/operation-open.cpp: Fixed double unref of IO object.

	* code/core/browser.cpp: Added a TODO comment about initial root node
	expansion for direct connections.

2008-10-11  Armin Burgmeier  <armin@arbur.net>

	* code/core/tablabel.hpp:
	* code/core/tablabel.cpp:
	* code/core/Makefile.am: Added TabLabel to this extra source file,
	make color of tab label red on activity, and grey when the document is
	being synchronized or the connection has been lost.

	* code/core/tablabel.cpp: Removed the TabLabel class in the anonymous
	namespace, use the one introduced above instead.

2008-10-10  Armin Burgmeier  <armin@arbur.net>

	* code/core/filechooser.cpp: Allow selecting non-local files in
	Gobby's filechooser.

	* code/commands/file-commands.cpp:
	* code/commands/browser-context-commands.cpp: Query the display name
	when opening a file, to use as document title.
	FileChooser::get_filename() does not work for non-local files.

2008-10-09  Armin Burgmeier  <armin@arbur.net>

	* code/core/iconmanager.cpp: Removed the Save All icon from display,
	because it does not fit to the "Save" icon for Toolbar and Menu sizes.

	* code/core/header.cpp: Remove Save All icon from the toolbar. Items
	without icons look ugly and the toolbar, and there is a shortcut for
	quick access.

2008-10-09  Armin Burgmeier  <armin@arbur.net>

	* code/util/file.hpp:
	* code/util/file.cpp: Added the config_filename() function.

	* code/core/browser.cpp:
	* code/core/documentinfostorage.cpp:
	* code/main.cpp: Make use of that function to access config files.

	* code/window.cpp: Give initial focus to browser.

2008-10-09  Armin Burgmeier  <armin@arbur.net>

	* configure.ac: Renamed the `OSX' define to `PLATFORM_OSX', and added
	`PLATFORM_OSX_NATIVE' when running with the quartz GDK target.

	* code/core/header.cpp: Adapt, only use ige-mac-integration when
	running natively on OS X.

2008-10-09  Armin Burgmeier  <armin@arbur.net>

	* code/: Moved from src/.

	* code/commands/browser-commands.hpp:
	* code/commands/browser-context-commands.hpp:
	* code/commands/edit-commands.hpp:
	* code/commands/file-commands.hpp:
	* code/commands/folder-commands.hpp:
	* code/commands/help-commands.hpp:
	* code/commands/view-commands.hpp:
	* code/core/browser.hpp:
	* code/core/closableframe.hpp:
	* code/core/documentinfostorage.hpp:
	* code/core/docwindow.hpp:
	* code/core/filechooser.hpp:
	* code/core/folder.hpp:
	* code/core/header.hpp:
	* code/core/huebutton.hpp:
	* code/core/iconmanager.hpp:
	* code/core/nodewatch.hpp:
	* code/core/noteplugin.hpp:
	* code/core/preferences.hpp:
	* code/core/statusbar.hpp:
	* code/core/userlist.hpp:
	* code/dialogs/documentlocationdialog.hpp:
	* code/dialogs/entrydialog.hpp:
	* code/dialogs/finddialog.hpp:
	* code/dialogs/gotodialog.hpp:
	* code/dialogs/initialdialog.hpp:
	* code/dialogs/preferencesdialog.hpp:
	* code/operations/operation-delete.hpp:
	* code/operations/operation-new.hpp:
	* code/operations/operation-open.hpp:
	* code/operations/operation-save.hpp:
	* code/operations/operations.hpp:
	* code/util/closebutton.hpp:
	* code/util/color.hpp:
	* code/util/config.hpp:
	* code/util/defaultaccumulator.hpp:
	* code/util/file.hpp:
	* code/util/i18n.hpp:
	* code/util/resolv.hpp:
	* code/util/serialize.hpp:
	* code/features.hpp:
	* code/window.hpp: Moved from inc/.

	* code/commands/Makefile.am:
	* code/operations/Makefile.am:
	* code/dialogs/Makefile.am:
	* code/core/Makefile.am:
	* code/util/Makefile.am:
	* code/Makefile.am:
	* Makefile.am:
	* configure.ac: Adapt to the new build structure.

2008-10-09  Armin Burgmeier  <armin@arbur.net>

	* src/Makefile.am: Rename the gobby binary to gobby-0.5, to support
	parallel installation with gobby 0.4.

2008-10-09  Armin Burgmeier  <armin@arbur.net>

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Added the scroll_to_cursor_position()
	function.

	* src/commands/edit-commands.cpp: Scroll to cursor position on Undo or
	Redo.

2008-10-08  Armin Burgmeier  <armin@arbur.net>

	* src/core/folder.cpp: Emit document_changed with NULL document after
	the last document has been removed, not before, so
	get_current_document() yields the correct result.

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: Don't rely on m_current_document
	being valid until on_document_changed() was called.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Make "New" and "Open" actions
	insensitive when there is no entry in the Document Browser.

2008-10-08  Armin Burgmeier  <armin@arbur.net>

	* src/core/browser.cpp: Adapt to infinote API changes.

2008-10-01  Armin Burgmeier  <armin@arbur.net>

	* src/util/config.cpp: Renamed the root config from gobby_config to
	gobby-config.

2008-09-30  Armin Burgmeier  <armin@arbur.net>

	* src/commands/folder-commands.cpp: Added another assertion to be able
	to better track another problem with users becoming active without
	having the document selected in the notebook.

2008-09-22  Armin Burgmeier  <armin@arbur.net>

	* src/commands/folder-commands.cpp: Flush pending user requests before
	setting user inactive, to avoid the user becoming active again due to
	a delayed caret movement.

2008-09-22  Armin Burgmeier  <armin@arbur.net>

	* src/core/preferences.cpp: Fixed writing the
	insert-tabs-instead-of-spaces option to the config file.

2008-09-22  Armin Burgmeier  <armin@arbur.net>

	* src/core/huebutton.cpp: Fix button ordering.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* src/main.cpp: Display version information on -v.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* src/core/docwindow.cpp: Make sure author tags have lower priority
	than GtkSourceView tags.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* src/window.cpp: Set main window role.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* inc/dialogs/preferenceswindow.hpp: Don't notify option if the newly
	selected option is the same as the already selected one.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* src/commands/file-fommands.cpp: Use document title as initial
	filename for Save dialog if no URI is available in info storage.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* src/commands/view-commands.cpp: Set "View Userlist" insensitive if
	no document is open.

2008-09-21  Armin Burgmeier  <armin@arbur.net>

	* inc/core/browser.hpp:
	* src/core/browser.cpp: Support hostname:port%device syntax for
	direct connections, to be able to establish IPv6 link-local
	connections directly.

2008-09-18  Armin Burgmeier  <armin@arbur.net>

	* update-potfiles: Added a small script to generate the
	po/POTFILES.in. It is simple, but enough for our needs.

2008-09-18  Armin Burgmeier  <armin@arbur.net>

	* src/commands/browser-commands.cpp:
	* src/commands/browser-context-commands.cpp:
	* src/core/browser.cpp:
	* src/core/header.cpp:
	* src/operations/operation-delete.cpp:
	* src/operations/operation-new.cpp:
	* src/operations/operation-open.cpp:
	* src/operations/operation-save.cpp: Changed all "…" character in
	strings to "...". Gedit does the same, and xgettext does not accept …
	without complaining. Translators can still choose to translate "..."
	to "…".

2008-09-18  Armin Burgmeier  <armin@arbur.net>

	* inc/util/encoding.hpp:
	* inc/core/encodingselector.hpp:
	* inc/dragdrop.hpp:
	* src/util/encoding.cpp:
	* src/core/encodingselector.cpp:
	* src/dragdrop.cpp: Removed. These remained from Gobby 0.4 but were
	never used in 0.5.

	* inc/util/Makefile.am:
	* inc/core/Makefile.am:
	* inc/Makefile.am:
	* src/util/Makefile.am:
	* src/core/Makefile.am:
	* src/Makefile.am: Removed the files from the build.

	* inc/window.hpp: Removed includes including those files.

2008-09-18  Armin Burgmeier  <armin@arbur.net>

	* inc/dialogs/preferencesdialogs.hpp:
	* src/dialogs/preferencesdialogs.cpp: Added a security page.

	* inc/core/browser.hpp:
	* src/core/browser.cpp: Set discovery's security policy and
	certificate manager's trust file from preferences.

2008-09-18  Armin Burgmeier  <armin@arbur.net>

	* src/core/preferencesdialog.cpp: Use a Gtk::SizeGroup to align the
	"User name" and "User color" labels correctly.

2008-09-18  Armin Burgmeier  <armin@arbur.net>

	* configure.ac: Added a new define, GOBBY_CONFIGDIR, that specifies
	where Gobby shall store it's configuration files (preferences, known
	documents, known hosts)

	* inc/core/preferences.hpp:
	* src/core/preferences.cpp: Added a security section with trust
	file and security-policy entries, changed serialise to serialize for
	consistency.

	* src/window.cpp: Call preferences.serialize instead of serialise.

	* src/core/browser.cpp: Use the security policy to create new XMPP
	connections. Honor GOBBY_CONFIGDIR for known hosts file.

	* src/core/documentinfostorage: Honor GOBBY_CONFIGDIR for known
	documents file.

	* src/main.cpp: Honor GOBBY_CONFIGDIR for config file.

2008-09-17  Armin Burgmeier  <armin@arbur.net>

	* src/Makefile.am:
	* src/commands/Makefile.am:
	* src/core/Makefile.am:
	* src/dialogs/Makefile.am:
	* src/operations/Makefile.am:
	* src/util/Makefile.am: Removed LOCALE_DIR definition from compiler
	command line.

	* configure.ac: Use AM_GLIB_DEFINE_LOCALEDIR instead.

	* src/main.cpp: Use GOBBY_LOCALEDIR instead of LOCALE_DIR.

2008-09-17  Armin Burgmeier  <armin@arbur.net>

	* inc/core/browser.hpp:
	* src/core/browser.cpp: Instantiate a InfGtkCertificateManager, to
	handle server certificates.

2008-09-17  Armin Burgmeier  <armin@arbur.net>

	* src/commands/view-commands.cpp: Fix usage of an uninitialized
	variable.

2008-09-13  Armin Burgmeier  <armin@arbur.net>

	* src/core/browser.cpp: Adapt to infinote API change.

2008-09-11  Armin Burgmeier  <armin@arbur.net>

	* inc/core/closableframe.hpp:
	* src/core/closableframe.cpp: Added title and icon for the frame.

	* src/core/docwindow.cpp:
	* src/window.cpp: Set title and icon for userlist and browser.

2008-09-11  Armin Burgmeier  <armin@arbur.net>

	* pixmaps/chat.png: Removed.

	* pixmaps/Makefile.am: Removed chat.png from distribution.

	* inc/core/iconmanager.hpp:
	* src/core/iconmanager.cpp: Removed chat icon.

	* src/commands/help-commands.cpp: Added Thomas Glatt to artists
	because he designed the Gobby logo.

2008-09-11  Armin Burgmeier  <armin@arbur.net>

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Added a boolean parameter to set_info() that
	specifies whether the info box can be closed by the user.

	* src/commands/browser-commands.cpp: Make persistent error infos
	closable, but not temporary synchronization infos.

2008-09-11  Armin Burgmeier  <armin@arbur.net>

	* inc/core/closableframe.hpp:
	* src/core/closableframe.cpp: Added a new widget, derived from
	Gtk::Frame, that shows a close button in the upper right corner, for
	the frame to be closed.

	* inc/core/Makefile.am:
	* src/core/Makefile.am: Added the new files to the build.

	* inc/core/preferences.hpp:
	* src/core/preferences.cpp: Added show_browser and show_userlist
	options.

	* inc/window.hpp:
	* src/window.cpp:
	* src/core/docwindow.cpp: Use a ClosableFrame for the browser and
	userlist, respectively.

	* src/core/browser.cpp: Removed the border_width. It is now applied by
	the ClosableFrame. If border_width is desired in certain situations,
	then it can still be called from elsewhere.

	* inc/core/header.hpp:
	* src/core/header.cpp: Added "Show Document Browser" and "Show
	Userlist" items to the View menu.

	* inc/commands/view-commands.hpp:
	* src/commands/view-commands.cpp: Implemented functionality for these
	(by setting the preference options).

2008-09-11  Armin Burgmeier  <armin@arbur.net>

	* inc/util/closebutton.hpp:
	* src/util/closebutton.cpp: Added CloseButton class that provides an
	as-small-as-possible GtkButton with a close icon on it.

	* inc/util/Makefile.am:
	* src/util/Makefile.am: Added new files to the build.

	* src/core/folder.cpp: Use CloseButton on the tabs.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* src/core/userlist.cpp: Fixed userlist sorting, sometimes unavailable
	users were shown above available ones.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* src/commands/folder-commands.cpp: Fix a warning when the connection
	to the server has been lost while being subscribed to a document.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* src/window.cpp: Keep browser pane at a fixed width.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Fixed an endless loop when the userlist is
	forcefully resized.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Change user color in running session on
	preferences color change.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* src/dialogs/preferencesdialog.cpp: Use notify::color instead of
	signal_color_set on ColorButton, because ColorButton::set_color (as
	used by HueButton) odes not emit the latter.

2008-09-10  Armin Burgmeier  <armin@arbur.net>

	* inc/core/userlist.hpp:
	* src/core/userlist.cpp: Watch notify::hue instead of notify::color
	on InfTextUser for user color changes. InfTextUser::color does not
	exist.

2008-09-09  Armin Burgmeier  <armin@arbur.net>

	* inc/core/huebutton.hpp:
	* src/core/huebutton.cpp: Added HueButton widget which is similar to
	Gtk::ColorButton but launches a InfTextGtkHueChooser instead of a
	GtkColorSelector on click.

	* inc/core/Makefile.am:
	* src/core/Makefile.am: Add the new files to the build.

	* inc/dialogs/initialdialog.hpp:
	* inc/dialogs/preferencesdialog.hpp:
	* src/dialogs/initialdialog.cpp:
	* src/dialogs/preferencesdialog.cpp: Use HueButton instead of
	ColorButton for user color selection.

2008-09-08  Armin Burgmeier  <armin@arbur.net>

	* inc/core/header.hpp:
	* src/core/header.cpp: Added FileClose action and menu item.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Handle it.

2008-09-08  Armin Burgmeier  <armin@arbur.net>

	* src/core/folder.cpp: Make tabs reorderable.

2008-09-08  Armin Burgmeier  <armin@arbur.net>

	* inc/core/preferences.hpp:
	* src/core/preferences.cpp: Added userlist_width property.

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Honor it by making sure the userlist always
	has the width specified in the preferences, and update preferences
	when the user resizes the user list.

	* inc/core/folder.hpp:
	* src/core/folder.cpp: Make Preferences nonconst, so DocWindow can
	store the current userlist width in it.

	* src/window.cpp: Increase default window size to 800x600.

2008-09-08  Armin Burgmeier  <armin@arbur.net>

	* inc/util/color.hpp:
	* src/util/color.cpp: Added hue_to_gdk_color().

	* inc/core/userlist.hpp:
	* src/core/userlist.cpp: Added a new widget that displays all users in
	a session.

	* inc/core/Makefile.am:
	* src/core/Makefile.am: Added new files to the build.

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Show userlist in a right pane.

	* src/core/folder.cpp (remove_document): Keep the session alive until
	the corresponding page has been removed from the folder.

2008-09-07  Armin Burgmeier  <armin@arbur.net>

	* inc/commands/folder-commands.hpp:
	* src/commands/folder-commands.cpp: Added FolderCommands class,
	setting user status according to currently activated document in
	folder.

	* src/core/folder.cpp: Make sure signal_document_added is emitted
	before the first emission of signal_document_changed for the new
	document.

	* inc/window.hpp:
	* src/window.cpp: Instantiate FolderCommands.

	* inc/commands/Makefile.am:
	* src/commands/Makefile.am: Added new files to the build.

2008-08-27  Armin Burgmeier  <armin@arbur.net>

	* src/commands/browser-commands.cpp: Set initial status depending
	on whether the document is currently displayed in the folder.

	* src/operations/operation-open.cpp: Set initial status of user in
	the document to inactive.

2008-08-26  Armin Burgmeier  <armin@arbur.net>

	* src/core/noteplugin.cpp: Adapt to libinfinity API change (user_data
	parameter to InfcNotePlugin callback functions).

2008-08-25  Armin Burgmeier  <armin@arbur.net>

	* src/operations/operation-open.cpp: Fixed a typo in a comment.

2008-08-24  Armin Burgmeier  <armin@arbur.net>

	* inc/core/nodewatch.hpp:
	* src/core/nodewatch.cpp: Added a class that watches a node in a
	InfcBrowser and emits a signal when it is removed.

	* inc/dialogs/entrydialog.hpp:
	* src/dialogs/entrydialog.cpp: Added a class that shows a dialog with
	an entry, to prompt the user for a string to enter.

	* inc/operations/operation-delete.hpp:
	* src/operations/operation-delete.cpp: Added an operation that deletes
	a node.

	* inc/core/browser.hpp:
	* src/core/browser.cpp: Added get_view().

	* inc/operations/operation-new.hpp:
	* src/operations/operation-new.cpp: Allow this to create a directory,
	via a boolean parameter.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp: Added delete_node() and
	create_directory().

	* src/core/documentinfostorage.cpp (on_node_removed): Don't require
	the removed node to be in our map.

	* inc/commands/browser-context-commands.hpp:
	* src/commands/browser-context-commands.cpp: Added a class that shows
	a context menu for the left browser pane, allowing the user to create
	or remove nodes.

	* inc/window.hpp:
	* src/window.cpp: Instantiate a BrowserContextCommands object.

	* inc/core/Makefile.am:
	* inc/dialogs/Makefile.am:
	* inc/operations/Makefile.am:
	* inc/commands/Makefile.am:
	* src/core/Makefile.am:
	* src/dialogs/Makefile.am:
	* src/operations/Makefile.am:
	* src/commands/Makefile.am: Added the new files to the build.

2008-08-24  Armin Burgmeier  <armin@arbur.net>

	* inc/core/filechooser.hpp:
	* src/core/filechooser.cpp: Added a new class that manages a "current
	folder uri" which specifies at which location the filechooser has been
	used the last time. This is used as default location for newly opened
	file chooser dialogs.

	* inc/core/Makefile.am:
	* src/core/Makefile.am: Add the new files to the build.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Use this when showing open or save
	dialogs.

	* inc/window.hpp:
	* src/window.cpp: Instantiate a FileChooser, pass to FileCommands.

2008-08-24  Armin Burgmeier  <armin@arbur.net>

	* inc/core/browser.hpp:
	* src/core/browser.cpp: Added the get_selected() and set_selected()
	methods, using the new inf_gtk_browser_view_set_selected().

	* src/commands/browser-commands.cpp: When subscribing to a session,
	then change the BrowserView selection to the corresponding note, and
	give focus to the DocWindow, so the user can start typing immediately.

2008-08-14  Armin Burgmeier  <armin@arbur.net>

	* src/commands/browser-commands.cpp: Removed an obsolete TODO item.

	* inc/core/folder.hpp:
	* src/core/folder.cpp: Automatically record every session to
	~/.infinote-records, to be able to reproduce errors that occur
	somewhere in the session.

2008-08-13  Armin Burgmeier  <armin@arbur.net>

	* src/core/header.cpp: Don't show hidden languages for syntax
	highlighting.

2008-07-23  Armin Burgmeier  <armin@arbur.net>

	* src/commands/view-commands.cpp: Block signal_language_changed
	while closing last document, to avoid a crash in the handler

2008-07-16  Armin Burgmeier  <armin@arbur.net>

	* inc/core/header.hpp:
	* src/core/header.cpp: Added lookup_language_action() to lookup a
	languagu action by the GtkSourceLanguage.

	* inc/commands/view-commands.hpp:
	* src/commands/view-commands.cpp: Switch the language of the current
	document if the user chooses another language in the menu, and make
	the menu reflect the language for the current document.

	* inc/commands/help-commands.hpp:
	* src/commands/help-commands.cpp: Implemented the About option.

	* inc/commands/Makefile.am:
	* src/commands/Makefile.am: Added help-commands to the build.

	* inc/window.hpp:
	* src/window.cpp: Instantiate HelpCommands.

2008-07-14  Armin Burgmeier  <armin@0x539.de>

	* configure.in: Require giomm 2.16.4 since this contains a bugfix that
	allows overwriting files when saving.

2008-07-12  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Join with an alternative user
	name if the preferred one is already in use.

2008-07-11  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/view-commands.hpp:
	* src/commands/view-commands.cpp: Implemented View Toolbar and View
	Statusbar.

	* inc/commands/Makefile.am:
	* src/commands/Makefile.am: Add the new files to the build.

	* inc/core/folder.hpp:
	* src/core/folder.cpp: Added a const version of
	get_current_document().

	* inc/core/statusbar.hpp:
	* src/core/statusbar.cpp: Added display of current line and column.

	* src/core/header.cpp: Hide toolbar initially if the show_toolbar
	preference is not set.

	* inc/window.hpp:
	* src/window.cpp: Instantiate ViewCommands.

2008-07-04  Armin Burgmeier  <armin@0x539.de>

	* inc/core/toolwindow.hpp:
	* src/core/toolwindow.cpp: Removed. ToolWindow is no longer used.

	* inc/core/Makefile.am:
	* src/core/Makefile.am: Adjusted build files.

2008-07-04  Armin Burgmeier  <armin@0x539.de>

	* inc/dialogs/gotodialog.hpp:
	* src/dialogs/gotodialog.cpp: Redesigned GotoDialog, and limit maximum
	line number to the line count of the current document.

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: Show GotoDialog and
	PreferencesDialog when the corresponding actions have been activated.

	* inc/dialogs/finddialog.hpp:
	* src/dialogs/finddialog.cpp: Added a destructor disconnecting from
	the active_user_changed signal of the current document.

	* src/core/header.cpp: Added mnemonics for a few menu items.

	* src/util/file.cpp: Fixed endless recursion in
	create_directory_with_parents().

2008-07-03  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: Take a StatusBar in constructor to
	hand to find dialog, implemented find and replace.

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Changed set_selection paramaters from
	const Gtk::TextIter& to const GtkTextIter* since we are using the C
	API of GtkTextBuffer.

	* src/dialogs/gotodialog.cpp: Adapt to API change in DocWindow.

	* inc/dialogs/finddialog.hpp:
	* src/dialogs/finddialog.cpp: Changed FindDialog to better meet the
	GNOME HIG, added "Wrap around" option, inherit from Gtk::Dialog
	instead of Gobby::ToolWindow.

	* src/core/header.cpp: Add a horizontal ellipsis to all menu items
	that open dialogs.

	* src/dialogs/initialdialog.cpp: Call Gtk::Dialog constructor with
	parent instead of default constructor.

	* src/window.cpp: Pass statusbar to EditCommands.

2008-07-03  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: Implemented Cut/Copy/Paste
	functionality.

	* src/core/folder.cpp: Emit signal_document_changed when the last
	document is about to be removed before the document has actually been
	removed, so that signal handlers that still have a reference to the
	last document can still make use of it.

	* src/core/header.cpp: Added a shortcut (<control><stift>L) for Save
	All, as in gedit.

2008-07-02  Armin Burgmeier  <armin@0x539.de>

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Added the active_user_changed signal and
	the get_active_user() function.

	* src/core/header.cpp: Added shortcuts for Undo and Redo.

	* src/core/noteplugin.cpp: Disable GtkSourceView Undo/Redo system by
	calling gtk_source_buffer_begin_non_undoable_action() without ever
	ending that non-undoable action.

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: New class handling the commands in
	the Edit submenu. For now Undo and Redo are implemented.

	* inc/window.hpp:
	* src/window.cpp: Instantiate EditCommands.

	* inc/commands/Makefile.am:
	* src/commands/Makefile.am: Added new files to build.

2008-06-29  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Cleaned up the code a bit,
	implemented save all.

	* src/core/folder.cpp: Emit document_changed with NULL argument in
	case the last document has been removed.

2008-06-28  Armin Burgmeier  <armin@0x539.de>

	* pixmaps/save-all.svg:
	* pixmaps/Makefile.am: Added icon for the save all menu item,
	contributed by Benjamin Herr <ben@0x539.de>

	* inc/core/iconmanager.hpp:
	* src/core/iconmanager.cpp: Add it to the icon manager.

	* src/core/header.cpp: Add it to the menu.

	* src/commands/file-commands.cpp: Fix a crash when unsubscribing from
	a session after having opened the file chooser to save a file.

2008-06-28  Armin Burgmeier  <armin@0x539.de>

	* inc/core/documentinfostorage.hpp:
	* src/core/documentinfostorage.cpp: Moved from
	operations/documentinfostorage.[hc]pp. Also added the get_key()
	method and added overloads of get_info and set_info that take a key
	instead of browser and iter.

	* inc/operations/operation-open.hpp: Fixed include of
	documentinfostorage.hpp.

	* inc/operations/operation-save.hpp:
	* src/operations/operation-save.cpp: Implemented saving of documents.
	This currently does refuse to overwrite existing files due to a bug in
	giomm, see http://bugzilla.gnome.org/show_bug.cgi?id=540656.

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Store a storage info key, so that on save
	the corresponding info can be updated.

	* inc/core/folder.hpp:
	* src/core/folder.cpp: Pass a correct storage info key to newly
	created documents.

	* inc/commands/browser-commands.hpp: 
	* src/commands/browser-commands.cpp: Pass a storage info key to the
	folder when a new document is opened because of a new subscription.
	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Implemented save and save as
	functionality.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp: Added save_document().

	* src/window.cpp: Pass info storage to browser and file commands.

	* inc/core/Makefile.am:
	* inc/operations/Makefile.am:
	* src/core/Makefile.am:
	* src/operations/Makefile.am: Add new and moved files to build.

2008-06-28  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Set info text in DocWindow and
	make the document readonly when the connection to the publisher has
	been lost.

	* src/core/docwindow.cpp: Allow user to be NULL in set_active_user().

	* src/core/folder.cpp: Set icon in tab label when the connection to
	the document's publisher has been lost.

2008-06-27  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Make sure subscription progress
	is only shown for sessions that are synchronized, not for sync-ins.

	* inc/core/preferences.hpp: Removed the non-const operator Type& since
	it allows changing the Properties content without notification. Also
	added get() in analogy to set().

	* inc/operations/operation-open.hpp:
	* src/operations/operation-open.cpp: Take a Preferences in the
	constructor, add a user to the session before synchronizing it to the
	server so that we can start editing the document before the
	synchronization is complete.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp:
	* src/window.cpp: Pass the Preferences object to OperationOpen.

	* src/operations/operation-new.cpp: Automatically Subscribe to newly
	created documents.

2008-06-27  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Watch synchronization and join
	user for every session subscribed to, not only sessions that have been
	subscribed to by the BrowserCommands.

	* src/core/folder.cpp: Fixed a typo in a comment

2008-06-25  Yarek Tyshchenko  <yarek@britishgraphics.co.uk>

	(Merged from master):

	* configure.ac: Require ige-mac-integration when Gobby is compiled
	natively on OS X.

	* src/core/header.cpp: Integrate the menu bar into the main OS X menu
	bar.

2008-06-22  Armin Burgmeier  <armin@0x539.de>

	* src/operations/documentinfostorage.cpp: Added return value for
	load_document, fixed storage of "root" node (was in top-level
	<documents> instead of <document>), 

	* src/operations/operation-open.cpp: Added a TODO comment to remmove
	memmove.

2008-06-22  Armin Burgmeier  <armin@0x539.de>

	* inc/operations/documentinfostorage.hpp:
	* src/operations/documentinfostorage.cpp: Disconnect from the
	set-browser signal handler on destruction.

2008-06-21  Armin Burgmeier  <armin@0x539.de>

	* inc/util/file.hpp:
	* src/util/file.cpp:
	* inc/util/Makefile.am:
	* src/util/Makefile.am: Added file.hpp/.cpp containing utility
	functions to deal with the filesystem. Currently, a function that
	creates a directory and all its parent if necessary is implemented.

	* inc/util/config.hpp:
	* src/util/config.cpp: Make use of that function in the destructor.

	* inc/util/resolv.hpp: Include <memory> since we use std::auto_ptr<>.

	* inc/operations/documentinfostorage.hpp:
	* src/operations/documentinfostorage.cpp: Added class that stores
	local information on known documents such as the local location, the
	encoding and the eol style.

	* inc/operations/operation-open.hpp:
	* src/operations/operation-open.cpp: Implemented opening documents
	from files, via giomm.

	* inc/operations/Makefile.am:
	* src/operations/Makefile.am: Add the new source files to the build.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp: Added encoding parameter to
	create_document(), added DocumentInfoStorage member.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Added functionlity for the Open menu
	item.

	* inc/window.hpp:
	* src/window.cpp: Instantiate a DocumentInfoStorage, pass to
	Operations.

	* src/main.cpp: Initialize giomm.

	* configure.ac: Added giomm as a dependency.

2008-05-19  Armin Burgmeier  <armin@0x539.de>

	* inc/Makefile.am:
	* inc/operations/Makefile.am:
	* inc/operations/operation-new.hpp:
	* inc/operations/operations.hpp:
	* src/Makefile.am:
	* src/operations/Makefile.am:
	* src/operations/operation-new.cpp:
	* src/operations/operations.cpp: Added Operation subsystem, handling
	tracking of asynchronous operations.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Make use of OperationNew to create
	new documents.

	* inc/window.hpp:
	* src/window.cpp: Instantate an Operations object, pass to
	FileCommands.

	* configure.ac:
	* Makefile.am: Create new makefiles, link libgobby-operations.h.

2008-05-18  Armin Burgmeier  <armin@0x539.de>

	* inc/core/Makefile.am:
	* src/core/Makefile.am:
	* inc/core/noteplugin.hpp:
	* src/core/noteplugin.cpp: Added text plugin as a public global
	constant.

	* src/window.cpp: Adapt.

2008-05-18  Armin Burgmeier  <armin@0x539.de>

	* src/dialogs/documentlocationdialog.cpp: Initially refilter the
	InfGtkBrowserModelFilter, otherwise previously explored nodes are
	always visible.

	* src/commands/file-commands.cpp: Adapt to the new infinote API in
	infc_browser_add_note().

2008-05-09  Armin Burgmeier  <armin@0x539.de>

	* inc/dialogs/documentlocationdialog.hpp:
	* src/dialogs/documentlocationdialog.cpp: Only allow ACCEPT response
	when a subdirectory is selected, filter all nodes but subdirectories.

	* src/commands/file-commands.cpp: Hide DocumentLocationDialog after
	usage.

2008-05-09  Armin Burgmeier  <armin@0x539.de>

	* inc/util/Makefile.am:
	* inc/util/color.hpp:
	* inc/util/config.hpp:
	* inc/util/defaultaccumulator.hpp:
	* inc/util/encoding.hpp:
	* inc/util/i18n.hpp:
	* inc/util/resolv.hpp:
	* inc/util/serialize.hpp:
	* inc/core/Makefile.am:
	* inc/core/browser.hpp:
	* inc/core/docwindow.hpp:
	* inc/core/encodingselector.hpp:
	* inc/core/folder.hpp:
	* inc/core/header.hpp:
	* inc/core/iconmanager.hpp:
	* inc/core/preferences.hpp:
	* inc/core/statusbar.hpp:
	* inc/core/toolwindow.hpp:
	* inc/dialogs/Makefile.am:
	* inc/dialogs/finddialog.hpp:
	* inc/dialogs/gotodialog.hpp:
	* inc/dialogs/initialdialog.hpp:
	* inc/dialogs/preferencesdialog.hpp:
	* inc/commands/Makefile.am:
	* inc/commands/browser-commands.hpp:
	* inc/window.hpp:
	* inc/Makefile.am:
	* src/util/Makefile.am:
	* src/util/color.cpp:
	* src/util/config.cpp:
	* src/util/encoding.cpp:
	* src/util/i18n.cpp:
	* src/util/resolv.cpp:
	* src/util/serialize.cpp:
	* src/core/Makefile.am:
	* src/core/browser.cpp:
	* src/core/docwindow.cpp:
	* src/core/encodingselector.cpp:
	* src/core/folder.cpp:
	* src/core/header.cpp:
	* src/core/iconmanager.cpp:
	* src/core/preferences.cpp:
	* src/core/statusbar.cpp:
	* src/core/toolwindow.cpp:
	* src/dialogs/Makefile.am:
	* src/dialogs/finddialog.cpp:
	* src/dialogs/gotodialog.cpp:
	* src/dialogs/initialdialog.cpp:
	* src/dialogs/preferencesdialog.cpp:
	* src/commands/Makefile.am:
	* src/commands/browser-commands.cpp:
	* src/dragdrop.cpp:
	* src/main.cpp:
	* src/window.cpp:
	* src/Makefile.am:
	* Makefile.am:
	* configure.ac: Reordered file hierarchy, fixing includes.

	* inc/dialogs/documentlocationdialog.hpp:
	* src/dialogs/documentlocationdialog.cpp: Added a dialog allowing the
	user to select on which directory and server to create a document.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Added functionality for File/New
	using the new dialog.

2008-04-20  Armin Burgmeier  <armin@0x539.de>

	* inc/browser.hpp:
	* src/browser.cpp: Adapt to new infinote API by using
	InfGtkBrowserStore instead of InfGtkBrowserModel.

2008-04-20  Armin Burgmeier  <armin@0x539.de>

	* src/browser.cpp: Fixed a format string (%1 instead of %0).

2008-04-13  Armin Burgmeier  <armin@0x539.de>

	* inc/docwindow.hpp:
	* src/docwindow.cpp: Added DocWindow::set_active_user().

	* src/folder.cpp: Show icon in the tab representing the current
	subscription state.

	* src/commands/browser-commands.cpp: Set active user after user join.

2008-04-13  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Track synchronization, perform a
	user join after synchronization, show error and status messages.

	* inc/docwindow.hpp:
	* src/docwindow.cpp: Implemented DocWindow::set_info() and
	DocWindow::unset_info().

	* src/folder.cpp: Changed Folder::lookup_document() to use a PageList
	and an iterator instead of traversing the list by index.

	* src/window.cpp: Pass the preferences to the BrowserCommands because
	it needs to find the name for the user to join.

2008-04-12  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* inc/commands/Makefile.am
	* src/commands/browser-commands.cpp:
	* src/commands/Makefile.am: Added functionality to subscribe to a
	session.

	* inc/Makefile.am:
	* src/Makefile.am: Recurse into the commands subdirectory.

	* Makefile.am: Link src/commands/libgobby-commands.a

	* configure.ac: Create inc/commands/Makefile.am and
	src/commands/Makefile.am.

	* inc/folder.hpp:
	* src/folder.cpp: Added switch_to_document(), make close button in tab
	label look correct.

	* src/header.cpp: Rename label for save all menu item from "Save all"
	to "Save All".

	* src/docwindow.cpp: Make the window non-editable by default. We make
	it editable later when a local user has joined.

	* inc/window.hpp:
	* src/window.cpp: Added BrowserCommands object.

2008-04-12  Armin Burgmeier  <armin@0x539.de>

	* contrib/gobby-0.0.20050522.ebuild:
	* contrib/artwork/chat.svg:
	* test/test_document.cpp: Removed, these are outdated.

	* inc/default_accumulator.hpp:
	* inc/serialize.hpp:
	* src/serialize.cpp: Added. These are basically copies from net6, but
	in the Gobby namespace.

	* inc/i18n.hpp:
	* src/i18n.cpp: Moved from inc/common.hpp or src/common.cpp,
	respectively.

	* inc/application_state.hpp:
	* inc/buffer_def.hpp:
	* inc/chat.hpp:
	* inc/colorsel.hpp:
	* inc/historyentry.hpp:
	* inc/document.hpp:
	* inc/document_settings.hpp:
	* inc/entrydialog.hpp:
	* inc/fileentry.hpp:
	* inc/gselector.hpp:
	* inc/hostdialog.hpp:
	* inc/hostprogressdialog.hpp:
	* inc/ipc.hpp:
	* inc/joindialog.hpp:
	* inc/joinprogressdialog.hpp:
	* inc/logview.hpp:
	* inc/passworddialog.hpp:
	* inc/progressdialog.hpp:
	* inc/regex.hpp:
	* inc/togglewindow.hpp:
	* inc/unix.hpp:
	* src/application_state.cpp:
	* src/buffer_def.cpp:
	* src/chat.cpp:
	* src/colorsel.cpp:
	* src/document.cpp:
	* src/document_settings.cpp:
	* src/entrydialog.cpp:
	* src/fileentry.cpp:
	* src/gselector.cpp:
	* src/historyentry.cpp:
	* src/hostdialog.cpp:
	* src/hostprogressdialog.cpp:
	* src/ipc.cpp:
	* src/joindialog.cpp:
	* src/joinprogressdialog.cpp:
	* src/logview.cpp:
	* src/passworddialog.cpp:
	* src/preferencesdialog.cpp:
	* src/progressdialog.cpp:
	* src/regex.cpp:
	* src/togglewindow.cpp:
	* src/unix.cpp: Removed. They are no longer required for infinote, or
	at least not in a such way that a complete rewrite would not be easier
	anyway.

	* inc/config.hpp:
	* inc/dragdrop.hpp:
	* inc/encoding.hpp:
	* inc/finddialog.hpp:
	* inc/folder.hpp:
	* inc/statusbar.hpp:
	* inc/window.hpp:
	* src/browser.cpp:
	* src/config.cpp:
	* src/dragdrop.cpp:
	* src/encoding.cpp:
	* src/encoding_selector.cpp:
	* src/finddialog.cpp:
	* src/folder.cpp:
	* src/gotodialog.cpp:
	* src/header.cpp:
	* src/icon.cpp:
	* src/initialdialog.cpp:
	* src/main.cpp:
	* src/resolv.cpp:
	* src/statusbar.cpp:
	* src/window.cpp: Removed any occurences of net6/obby stuff, replaced
	by equivalent functionality if possible.

	* po/POTFILES.in: Removed source files, added a TODO comment to readd
	them as soon as the required files are ready.

	* Makefile.am:
	* contrib/Makefile.am:
	* contrib/artwork/Makefile.am:
	* inc/Makefile.am:
	* pixmaps/Makefile.am:
	* src/Makefile.am:
	* win32/Makefile.am: Hierarchical build instead of only a top-level
	Makefile.am, so that each Makefile.am is smaller and easier to use.

	* configure.ac: Remove dependency on net6 and obby.

2008-04-12  Armin Burgmeier  <armin@0x539.de>

	* src/preferences.cpp: Changed default value for homeend_smart to
	false.

	* inc/resolv.hpp:
	* src/resolv.cpp: Changed signature of callbacks to include the
	ResolvHandle.

	* inc/browser.hpp:
	* src/browser.cpp: Added resolv map to correctly cancel pending
	resolvs on destruction.

	* inc/statusbar.hpp:
	* src/statusbar.cpp: Correctly remove the timeout connection on
	destruction of a statusbar message.

	* inc/folder.hpp:
	* inc/docwindow.hpp:
	* src/folder.cpp:
	* src/docwindow.cpp: Changed Folder and DocWindow to be used with
	InfTextSession instead of obby::local_document_info.

	* inc/window.hpp:
	* src/finddialog.cpp:
	* src/gotodialog.cpp:
	* src/window.cpp: Adapted to Folder and DocWindow changes.

2008-03-13  Armin Burgmeier  <armin@0x539.de>

	* inc/statusbar.hpp:
	* src/statusbar.cpp: Removed old functionality, add methods to add
	and remove status messages.

	* inc/window.hpp:
	* inc/window.cpp: Adapt.

2008-03-09  Armin Burgmeier  <armin@0x539.de>

	* inc/documentlist.hpp:
	* inc/userlist.hpp:
	* src/documentlist.cpp:
	* src/userlist.cpp:
	* Makefile.am: Removed.

	* inc/preferences.hpp:
	* src/preferences.cpp: Added show_toolbar and show_statusbar
	preferences.

	* inc/initialdialog.hpp: Added missing include (gtkmm/image.h).

	* inc/header.hpp:
	* src/header.cpp: Redesign menu/toolbar to better match common
	editors.

	* inc/window.hpp:
	* src/folder.cpp:
	* src/window.cpp: Adapt to above changes, current UI disfunctional.

2008-03-06  Armin Burgmeier  <armin@0x539.de>
	
	* inc/resolv.hpp:
	* src/resolv.cpp: Code to asynchronously resolve host names.

	* inc/browser.hpp:
	* src/browser.cpp: Added Browser class that shows remote directories
	to browse (via InfGtkBrowserView), and that allows to create direct
	connections.

	* inc/window.hpp:
	* src/window.cpp: Show browser in a sidepane to the left, remove chat.

	* src/initialdialog.cpp: Set window title.

	* Makefile.am: Added browser.{h,c}pp and resolv.{h,c}pp

	* configure.ac: Depend on infinote.

2008-03-03  Armin Burgmeier  <armin@0x539.de>

	* inc/initialdialog.hpp:
	* src/initialdialog.cpp:
	* Makefile.am: Added an initial welcome dialog.

	* inc/window.hpp:
	* src/window.cpp: Show initial dialog the first time gobby is started.

2008-03-03  Armin Burgmeier  <armin@0x539.de>

	* inc/preferencesdialog.hpp:
	* src/preferencesdialog.cpp: Store chosen preferences.

	* inc/preferences.hpp: Add Preferences::Option::set for convenience.

	* inc/colorutil.hpp:
	* src/colorutil.cpp:
	* Makefile.am: Added colorutil containing some utility functions to
	handle colors.

2008-03-02  Armin Burgmeier  <armin@0x539.de>

	* configure.ac: Require at least gtkmm 2.12, drop gtksourceview1
	support, post-branch bump to 0.4.90.

	* inc/preferences.hpp:
	* src/preferences.cpp: Removed options not required for infinote,
	added user preferences page.

	* inc/preferencesdialog.hpp:
	* src/preferencesdialog.cpp: Adapted and redesigned preferences
	dialog to better meet the Gnome HIG. Currently disfunctional.

	* inc/header.hpp:
	* inc/folder.hpp:
	* inc/docwindow.hpp:
	* inc/window.hpp:
	* src/header.cpp:
	* src/folder.cpp:
	* src/chat.cpp:
	* src/togglewindow.cpp:
	* src/docwindow.cpp:
	* src/window.cpp: Adapt.
