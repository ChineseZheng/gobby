2008-07-03  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: Take a StatusBar in constructor to
	hand to find dialog, implemented find and replace.

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Changed set_selection paramaters from
	const Gtk::TextIter& to const GtkTextIter* since we are using the C
	API of GtkTextBuffer.

	* src/dialogs/gotodialog.cpp: Adapt to API change in DocWindow.

	* inc/dialogs/finddialog.hpp:
	* src/dialogs/finddialog.cpp: Changed FindDialog to better meet the
	GNOME HIG, added "Wrap around" option, inherit from Gtk::Dialog
	instead of Gobby::ToolWindow.

	* src/core/header.cpp: Add a horizontal ellipsis to all menu items
	that open dialogs.

	* src/dialogs/initialdialog.cpp: Call Gtk::Dialog constructor with
	parent instead of default constructor.

	* src/window.cpp: Pass statusbar to EditCommands.

2008-07-03  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: Implemented Cut/Copy/Paste
	functionality.

	* src/core/folder.cpp: Emit signal_document_changed when the last
	document is about to be removed before the document has actually been
	removed, so that signal handlers that still have a reference to the
	last document can still make use of it.

	* src/core/header.cpp: Added a shortcut (<control><stift>L) for Save
	All, as in gedit.

2008-07-02  Armin Burgmeier  <armin@0x539.de>

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Added the active_user_changed signal and
	the get_active_user() function.

	* src/core/header.cpp: Added shortcuts for Undo and Redo.

	* src/core/noteplugin.cpp: Disable GtkSourceView Undo/Redo system by
	calling gtk_source_buffer_begin_non_undoable_action() without ever
	ending that non-undoable action.

	* inc/commands/edit-commands.hpp:
	* src/commands/edit-commands.cpp: New class handling the commands in
	the Edit submenu. For now Undo and Redo are implemented.

	* inc/window.hpp:
	* src/window.cpp: Instantiate EditCommands.

	* inc/commands/Makefile.am:
	* src/commands/Makefile.am: Added new files to build.

2008-06-29  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Cleaned up the code a bit,
	implemented save all.

	* src/core/folder.cpp: Emit document_changed with NULL argument in
	case the last document has been removed.

2008-06-28  Armin Burgmeier  <armin@0x539.de>

	* pixmaps/save-all.svg:
	* pixmaps/Makefile.am: Added icon for the save all menu item,
	contributed by Benjamin Herr <ben@0x539.de>

	* inc/core/iconmanager.hpp:
	* src/core/iconmanager.cpp: Add it to the icon manager.

	* src/core/header.cpp: Add it to the menu.

	* src/commands/file-commands.cpp: Fix a crash when unsubscribing from
	a session after having opened the file chooser to save a file.

2008-06-28  Armin Burgmeier  <armin@0x539.de>

	* inc/core/documentinfostorage.hpp:
	* src/core/documentinfostorage.cpp: Moved from
	operations/documentinfostorage.[hc]pp. Also added the get_key()
	method and added overloads of get_info and set_info that take a key
	instead of browser and iter.

	* inc/operations/operation-open.hpp: Fixed include of
	documentinfostorage.hpp.

	* inc/operations/operation-save.hpp:
	* src/operations/operation-save.cpp: Implemented saving of documents.
	This currently does refuse to overwrite existing files due to a bug in
	giomm, see http://bugzilla.gnome.org/show_bug.cgi?id=540656.

	* inc/core/docwindow.hpp:
	* src/core/docwindow.cpp: Store a storage info key, so that on save
	the corresponding info can be updated.

	* inc/core/folder.hpp:
	* src/core/folder.cpp: Pass a correct storage info key to newly
	created documents.

	* inc/commands/browser-commands.hpp: 
	* src/commands/browser-commands.cpp: Pass a storage info key to the
	folder when a new document is opened because of a new subscription.
	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Implemented save and save as
	functionality.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp: Added save_document().

	* src/window.cpp: Pass info storage to browser and file commands.

	* inc/core/Makefile.am:
	* inc/operations/Makefile.am:
	* src/core/Makefile.am:
	* src/operations/Makefile.am: Add new and moved files to build.

2008-06-28  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Set info text in DocWindow and
	make the document readonly when the connection to the publisher has
	been lost.

	* src/core/docwindow.cpp: Allow user to be NULL in set_active_user().

	* src/core/folder.cpp: Set icon in tab label when the connection to
	the document's publisher has been lost.

2008-06-27  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Make sure subscription progress
	is only shown for sessions that are synchronized, not for sync-ins.

	* inc/core/preferences.hpp: Removed the non-const operator Type& since
	it allows changing the Properties content without notification. Also
	added get() in analogy to set().

	* inc/operations/operation-open.hpp:
	* src/operations/operation-open.cpp: Take a Preferences in the
	constructor, add a user to the session before synchronizing it to the
	server so that we can start editing the document before the
	synchronization is complete.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp:
	* src/window.cpp: Pass the Preferences object to OperationOpen.

	* src/operations/operation-new.cpp: Automatically Subscribe to newly
	created documents.

2008-06-27  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Watch synchronization and join
	user for every session subscribed to, not only sessions that have been
	subscribed to by the BrowserCommands.

	* src/core/folder.cpp: Fixed a typo in a comment

2008-06-25  Yarek Tyshchenko  <yarek@britishgraphics.co.uk>

	(Merged from master):

	* configure.ac: Require ige-mac-integration when Gobby is compiled
	natively on OS X.

	* src/core/header.cpp: Integrate the menu bar into the main OS X menu
	bar.

2008-06-22  Armin Burgmeier  <armin@0x539.de>

	* src/operations/documentinfostorage.cpp: Added return value for
	load_document, fixed storage of "root" node (was in top-level
	<documents> instead of <document>), 

	* src/operations/operation-open.cpp: Added a TODO comment to remmove
	memmove.

2008-06-22  Armin Burgmeier  <armin@0x539.de>

	* inc/operations/documentinfostorage.hpp:
	* src/operations/documentinfostorage.cpp: Disconnect from the
	set-browser signal handler on destruction.

2008-06-21  Armin Burgmeier  <armin@0x539.de>

	* inc/util/file.hpp:
	* src/util/file.cpp:
	* inc/util/Makefile.am:
	* src/util/Makefile.am: Added file.hpp/.cpp containing utility
	functions to deal with the filesystem. Currently, a function that
	creates a directory and all its parent if necessary is implemented.

	* inc/util/config.hpp:
	* src/util/config.cpp: Make use of that function in the destructor.

	* inc/util/resolv.hpp: Include <memory> since we use std::auto_ptr<>.

	* inc/operations/documentinfostorage.hpp:
	* src/operations/documentinfostorage.cpp: Added class that stores
	local information on known documents such as the local location, the
	encoding and the eol style.

	* inc/operations/operation-open.hpp:
	* src/operations/operation-open.cpp: Implemented opening documents
	from files, via giomm.

	* inc/operations/Makefile.am:
	* src/operations/Makefile.am: Add the new source files to the build.

	* inc/operations/operations.hpp:
	* src/operations/operations.cpp: Added encoding parameter to
	create_document(), added DocumentInfoStorage member.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Added functionlity for the Open menu
	item.

	* inc/window.hpp:
	* src/window.cpp: Instantiate a DocumentInfoStorage, pass to
	Operations.

	* src/main.cpp: Initialize giomm.

	* configure.ac: Added giomm as a dependency.

2008-05-19  Armin Burgmeier  <armin@0x539.de>

	* inc/Makefile.am:
	* inc/operations/Makefile.am:
	* inc/operations/operation-new.hpp:
	* inc/operations/operations.hpp:
	* src/Makefile.am:
	* src/operations/Makefile.am:
	* src/operations/operation-new.cpp:
	* src/operations/operations.cpp: Added Operation subsystem, handling
	tracking of asynchronous operations.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Make use of OperationNew to create
	new documents.

	* inc/window.hpp:
	* src/window.cpp: Instantate an Operations object, pass to
	FileCommands.

	* configure.ac:
	* Makefile.am: Create new makefiles, link libgobby-operations.h.

2008-05-18  Armin Burgmeier  <armin@0x539.de>

	* inc/core/Makefile.am:
	* src/core/Makefile.am:
	* inc/core/noteplugin.hpp:
	* src/core/noteplugin.cpp: Added text plugin as a public global
	constant.

	* src/window.cpp: Adapt.

2008-05-18  Armin Burgmeier  <armin@0x539.de>

	* src/dialogs/documentlocationdialog.cpp: Initially refilter the
	InfGtkBrowserModelFilter, otherwise previously explored nodes are
	always visible.

	* src/commands/file-commands.cpp: Adapt to the new infinote API in
	infc_browser_add_note().

2008-05-09  Armin Burgmeier  <armin@0x539.de>

	* inc/dialogs/documentlocationdialog.hpp:
	* src/dialogs/documentlocationdialog.cpp: Only allow ACCEPT response
	when a subdirectory is selected, filter all nodes but subdirectories.

	* src/commands/file-commands.cpp: Hide DocumentLocationDialog after
	usage.

2008-05-09  Armin Burgmeier  <armin@0x539.de>

	* inc/util/Makefile.am:
	* inc/util/color.hpp:
	* inc/util/config.hpp:
	* inc/util/defaultaccumulator.hpp:
	* inc/util/encoding.hpp:
	* inc/util/i18n.hpp:
	* inc/util/resolv.hpp:
	* inc/util/serialize.hpp:
	* inc/core/Makefile.am:
	* inc/core/browser.hpp:
	* inc/core/docwindow.hpp:
	* inc/core/encodingselector.hpp:
	* inc/core/folder.hpp:
	* inc/core/header.hpp:
	* inc/core/iconmanager.hpp:
	* inc/core/preferences.hpp:
	* inc/core/statusbar.hpp:
	* inc/core/toolwindow.hpp:
	* inc/dialogs/Makefile.am:
	* inc/dialogs/finddialog.hpp:
	* inc/dialogs/gotodialog.hpp:
	* inc/dialogs/initialdialog.hpp:
	* inc/dialogs/preferencesdialog.hpp:
	* inc/commands/Makefile.am:
	* inc/commands/browser-commands.hpp:
	* inc/window.hpp:
	* inc/Makefile.am:
	* src/util/Makefile.am:
	* src/util/color.cpp:
	* src/util/config.cpp:
	* src/util/encoding.cpp:
	* src/util/i18n.cpp:
	* src/util/resolv.cpp:
	* src/util/serialize.cpp:
	* src/core/Makefile.am:
	* src/core/browser.cpp:
	* src/core/docwindow.cpp:
	* src/core/encodingselector.cpp:
	* src/core/folder.cpp:
	* src/core/header.cpp:
	* src/core/iconmanager.cpp:
	* src/core/preferences.cpp:
	* src/core/statusbar.cpp:
	* src/core/toolwindow.cpp:
	* src/dialogs/Makefile.am:
	* src/dialogs/finddialog.cpp:
	* src/dialogs/gotodialog.cpp:
	* src/dialogs/initialdialog.cpp:
	* src/dialogs/preferencesdialog.cpp:
	* src/commands/Makefile.am:
	* src/commands/browser-commands.cpp:
	* src/dragdrop.cpp:
	* src/main.cpp:
	* src/window.cpp:
	* src/Makefile.am:
	* Makefile.am:
	* configure.ac: Reordered file hierarchy, fixing includes.

	* inc/dialogs/documentlocationdialog.hpp:
	* src/dialogs/documentlocationdialog.cpp: Added a dialog allowing the
	user to select on which directory and server to create a document.

	* inc/commands/file-commands.hpp:
	* src/commands/file-commands.cpp: Added functionality for File/New
	using the new dialog.

2008-04-20  Armin Burgmeier  <armin@0x539.de>

	* inc/browser.hpp:
	* src/browser.cpp: Adapt to new infinote API by using
	InfGtkBrowserStore instead of InfGtkBrowserModel.

2008-04-20  Armin Burgmeier  <armin@0x539.de>

	* src/browser.cpp: Fixed a format string (%1 instead of %0).

2008-04-13  Armin Burgmeier  <armin@0x539.de>

	* inc/docwindow.hpp:
	* src/docwindow.cpp: Added DocWindow::set_active_user().

	* src/folder.cpp: Show icon in the tab representing the current
	subscription state.

	* src/commands/browser-commands.cpp: Set active user after user join.

2008-04-13  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* src/commands/browser-commands.cpp: Track synchronization, perform a
	user join after synchronization, show error and status messages.

	* inc/docwindow.hpp:
	* src/docwindow.cpp: Implemented DocWindow::set_info() and
	DocWindow::unset_info().

	* src/folder.cpp: Changed Folder::lookup_document() to use a PageList
	and an iterator instead of traversing the list by index.

	* src/window.cpp: Pass the preferences to the BrowserCommands because
	it needs to find the name for the user to join.

2008-04-12  Armin Burgmeier  <armin@0x539.de>

	* inc/commands/browser-commands.hpp:
	* inc/commands/Makefile.am
	* src/commands/browser-commands.cpp:
	* src/commands/Makefile.am: Added functionality to subscribe to a
	session.

	* inc/Makefile.am:
	* src/Makefile.am: Recurse into the commands subdirectory.

	* Makefile.am: Link src/commands/libgobby-commands.a

	* configure.ac: Create inc/commands/Makefile.am and
	src/commands/Makefile.am.

	* inc/folder.hpp:
	* src/folder.cpp: Added switch_to_document(), make close button in tab
	label look correct.

	* src/header.cpp: Rename label for save all menu item from "Save all"
	to "Save All".

	* src/docwindow.cpp: Make the window non-editable by default. We make
	it editable later when a local user has joined.

	* inc/window.hpp:
	* src/window.cpp: Added BrowserCommands object.

2008-04-12  Armin Burgmeier  <armin@0x539.de>

	* contrib/gobby-0.0.20050522.ebuild:
	* contrib/artwork/chat.svg:
	* test/test_document.cpp: Removed, these are outdated.

	* inc/default_accumulator.hpp:
	* inc/serialize.hpp:
	* src/serialize.cpp: Added. These are basically copies from net6, but
	in the Gobby namespace.

	* inc/i18n.hpp:
	* src/i18n.cpp: Moved from inc/common.hpp or src/common.cpp,
	respectively.

	* inc/application_state.hpp:
	* inc/buffer_def.hpp:
	* inc/chat.hpp:
	* inc/colorsel.hpp:
	* inc/historyentry.hpp:
	* inc/document.hpp:
	* inc/document_settings.hpp:
	* inc/entrydialog.hpp:
	* inc/fileentry.hpp:
	* inc/gselector.hpp:
	* inc/hostdialog.hpp:
	* inc/hostprogressdialog.hpp:
	* inc/ipc.hpp:
	* inc/joindialog.hpp:
	* inc/joinprogressdialog.hpp:
	* inc/logview.hpp:
	* inc/passworddialog.hpp:
	* inc/progressdialog.hpp:
	* inc/regex.hpp:
	* inc/togglewindow.hpp:
	* inc/unix.hpp:
	* src/application_state.cpp:
	* src/buffer_def.cpp:
	* src/chat.cpp:
	* src/colorsel.cpp:
	* src/document.cpp:
	* src/document_settings.cpp:
	* src/entrydialog.cpp:
	* src/fileentry.cpp:
	* src/gselector.cpp:
	* src/historyentry.cpp:
	* src/hostdialog.cpp:
	* src/hostprogressdialog.cpp:
	* src/ipc.cpp:
	* src/joindialog.cpp:
	* src/joinprogressdialog.cpp:
	* src/logview.cpp:
	* src/passworddialog.cpp:
	* src/preferencesdialog.cpp:
	* src/progressdialog.cpp:
	* src/regex.cpp:
	* src/togglewindow.cpp:
	* src/unix.cpp: Removed. They are no longer required for infinote, or
	at least not in a such way that a complete rewrite would not be easier
	anyway.

	* inc/config.hpp:
	* inc/dragdrop.hpp:
	* inc/encoding.hpp:
	* inc/finddialog.hpp:
	* inc/folder.hpp:
	* inc/statusbar.hpp:
	* inc/window.hpp:
	* src/browser.cpp:
	* src/config.cpp:
	* src/dragdrop.cpp:
	* src/encoding.cpp:
	* src/encoding_selector.cpp:
	* src/finddialog.cpp:
	* src/folder.cpp:
	* src/gotodialog.cpp:
	* src/header.cpp:
	* src/icon.cpp:
	* src/initialdialog.cpp:
	* src/main.cpp:
	* src/resolv.cpp:
	* src/statusbar.cpp:
	* src/window.cpp: Removed any occurences of net6/obby stuff, replaced
	by equivalent functionality if possible.

	* po/POTFILES.in: Removed source files, added a TODO comment to readd
	them as soon as the required files are ready.

	* Makefile.am:
	* contrib/Makefile.am:
	* contrib/artwork/Makefile.am:
	* inc/Makefile.am:
	* pixmaps/Makefile.am:
	* src/Makefile.am:
	* win32/Makefile.am: Hierarchical build instead of only a top-level
	Makefile.am, so that each Makefile.am is smaller and easier to use.

	* configure.ac: Remove dependency on net6 and obby.

2008-04-12  Armin Burgmeier  <armin@0x539.de>

	* src/preferences.cpp: Changed default value for homeend_smart to
	false.

	* inc/resolv.hpp:
	* src/resolv.cpp: Changed signature of callbacks to include the
	ResolvHandle.

	* inc/browser.hpp:
	* src/browser.cpp: Added resolv map to correctly cancel pending
	resolvs on destruction.

	* inc/statusbar.hpp:
	* src/statusbar.cpp: Correctly remove the timeout connection on
	destruction of a statusbar message.

	* inc/folder.hpp:
	* inc/docwindow.hpp:
	* src/folder.cpp:
	* src/docwindow.cpp: Changed Folder and DocWindow to be used with
	InfTextSession instead of obby::local_document_info.

	* inc/window.hpp:
	* src/finddialog.cpp:
	* src/gotodialog.cpp:
	* src/window.cpp: Adapted to Folder and DocWindow changes.

2008-03-13  Armin Burgmeier  <armin@0x539.de>

	* inc/statusbar.hpp:
	* src/statusbar.cpp: Removed old functionality, add methods to add
	and remove status messages.

	* inc/window.hpp:
	* inc/window.cpp: Adapt.

2008-03-09  Armin Burgmeier  <armin@0x539.de>

	* inc/documentlist.hpp:
	* inc/userlist.hpp:
	* src/documentlist.cpp:
	* src/userlist.cpp:
	* Makefile.am: Removed.

	* inc/preferences.hpp:
	* src/preferences.cpp: Added show_toolbar and show_statusbar
	preferences.

	* inc/initialdialog.hpp: Added missing include (gtkmm/image.h).

	* inc/header.hpp:
	* src/header.cpp: Redesign menu/toolbar to better match common
	editors.

	* inc/window.hpp:
	* src/folder.cpp:
	* src/window.cpp: Adapt to above changes, current UI disfunctional.

2008-03-06  Armin Burgmeier  <armin@0x539.de>
	
	* inc/resolv.hpp:
	* src/resolv.cpp: Code to asynchronously resolve host names.

	* inc/browser.hpp:
	* src/browser.cpp: Added Browser class that shows remote directories
	to browse (via InfGtkBrowserView), and that allows to create direct
	connections.

	* inc/window.hpp:
	* src/window.cpp: Show browser in a sidepane to the left, remove chat.

	* src/initialdialog.cpp: Set window title.

	* Makefile.am: Added browser.{h,c}pp and resolv.{h,c}pp

	* configure.ac: Depend on infinote.

2008-03-03  Armin Burgmeier  <armin@0x539.de>

	* inc/initialdialog.hpp:
	* src/initialdialog.cpp:
	* Makefile.am: Added an initial welcome dialog.

	* inc/window.hpp:
	* src/window.cpp: Show initial dialog the first time gobby is started.

2008-03-03  Armin Burgmeier  <armin@0x539.de>

	* inc/preferencesdialog.hpp:
	* src/preferencesdialog.cpp: Store chosen preferences.

	* inc/preferences.hpp: Add Preferences::Option::set for convenience.

	* inc/colorutil.hpp:
	* src/colorutil.cpp:
	* Makefile.am: Added colorutil containing some utility functions to
	handle colors.

2008-03-02  Armin Burgmeier  <armin@0x539.de>

	* configure.ac: Require at least gtkmm 2.12, drop gtksourceview1
	support, post-branch bump to 0.4.90.

	* inc/preferences.hpp:
	* src/preferences.cpp: Removed options not required for infinote,
	added user preferences page.

	* inc/preferencesdialog.hpp:
	* src/preferencesdialog.cpp: Adapted and redesigned preferences
	dialog to better meet the Gnome HIG. Currently disfunctional.

	* inc/header.hpp:
	* inc/folder.hpp:
	* inc/docwindow.hpp:
	* inc/window.hpp:
	* src/header.cpp:
	* src/folder.cpp:
	* src/chat.cpp:
	* src/togglewindow.cpp:
	* src/docwindow.cpp:
	* src/window.cpp: Adapt.
